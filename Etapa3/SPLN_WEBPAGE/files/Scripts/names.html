<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="author" content="">

        <title>SPLN - Jornal Brasileiro</title>

        <link href="css/bootstrap.min.css" rel="stylesheet">

        <link href="css/simple-sidebar.css" rel="stylesheet">

    </head>

    <body>

        <div id="wrapper">
            <div id="sidebar-wrapper">
                <ul class="sidebar-nav">
                    <li class="sidebar-brand">
                        <a href="../../index.html">
                            Jornal Brasileiro
                        </a>
                    </li>
                    <li>
                        <a href="cetenFolha.html">Ceten Folha</a>
                    </li>
                    <li>
                       <a href="cidades.html">Cidade</a>
                    </li>
                    <li>
                       <a href="comparison_cidades_grupo2.html">Comparar Cidades com o Grupo2</a>
                    </li>
                    <li>
                       <a href="comparison_cidades_grupo3.html">Comparar Cidades com o Grupo3</a>
                    </li>
                    <li>
                       <a href="comparison_cidades_grupo16.html">Comparar Cidades com o Grupo16</a>
                    </li>
                    <li>
                        <a href="paises.html">Paises</a>
                    </li>
                    <li>
                        <a href="comparison_paises_grupo2.html">Comparar Países com o Grupo2</a>
                    </li>
                    <li>
                        <a href="comparison_paises_grupo2.html">Comparar Países com o Grupo3</a>
                    </li>
                    <li>
                        <a href="comparison_paises_grupo2.html">Comparar Países com o Grupo16</a>
                    </li>
                    <li>
                        <a href="names.html">Nomes</a>
                    </li>
                    <li>
                        <a href="comparison_names_grupo2.html">Comparar Nomes com o Grupo2</a>
                    </li>
                    <li>
                        <a href="comparison_names_grupo3.html">Comparar Nomes com o Grupo3</a>
                    </li>
                    <li>
                        <a href="comparison_names_grupo16.html">Comparar Nomes com o Grupo16</a>
                    </li>
                    <li>
                        <a href="validate.html">Validações</a>
                    </li>
                </ul>
            </div>

            <div id="page-content-wrapper">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-lg-12">

<ul id="index">
  <li><a href="#Names.pl">Names.pl</a>
    <ul>
      <li><a href="#Modulos">Modulos</a></li>
      <li><a href="#Variaveis">Variaveis</a></li>
      <li><a href="#Abertura-da-Base-de-Dados---Nomes">Abertura da Base de Dados - Nomes</a></li>
      <li><a href="#Leitura-dos-Ficheiros">Leitura dos Ficheiros</a></li>
      <li><a href="#Abertura-do-Ficheiro-com-as-noticias">Abertura do Ficheiro com as noticias</a></li>
      <li><a href="#Variavel-Nome-Proprio">Variavel Nome Proprio</a></li>
      <li><a href="#Variavel-Preposicoes">Variavel Preposicoes</a></li>
      <li><a href="#Variavel-Combinada-com-Nome-Proprio-e-Preposicoes">Variavel Combinada com Nome Proprio e Preposicoes</a></li>
      <li><a href="#Contagem-dos-Nomes">Contagem dos Nomes</a>
        <ul>
          <li><a href="#Processar-o-ficheiro-jb.xml">Processar o ficheiro jb.xml</a></li>
          <li><a href="#ignorar-tags">ignorar tags (&lt; &lt;/ &gt; /&gt;)</a></li>
          <li><a href="#ignore-text-from-tag-tags">ignore text from tag tags</a></li>
          <li><a href="#ignore-text-from-tag-tag">ignore text from tag tag</a></li>
          <li><a href="#ignore-text-form-tag-t-title">ignore text form tag t (title)</a></li>
          <li><a href="#ignore-text-form-tag-sec-section">ignore text form tag sec (section)</a></li>
        </ul>
      </li>
      <li><a href="#Match-a-expressao-regular">Match a expressao regular</a>
        <ul>
          <li><a href="#Se-a-expressao-existir-na-hash-nomes">Se a expressao existir na hash nomes</a>
            <ul>
              <li><a href="#Faco-split-do-que-a-expressao-apanha">Faco split do que a expressao apanha</a></li>
              <li><a href="#Para-cada-string-no-array-da-expressao-regular">Para cada string no array da expressao regular</a></li>
              <li><a href="#A-nao-ser-que-seja-de-do-da-des-dos-das">A nao ser que seja (de/do/da/des/dos/das)</a></li>
              <li><a href="#Se-a-string-nao-existir-na-hash-dos-nomes">Se a string nao existir na hash dos nomes:</a></li>
              <li><a href="#Se-a-string-existir-na-hash-dos-nomes">Se a string existir na hash dos nomes:</a></li>
              <li><a href="#Se-a-flag-for-falsa">Se a flag for falsa:</a></li>
              <li><a href="#Se-a-flag-for-verdadeira-e-se-tiver-concatenado-nomes">Se a flag for verdadeira e se tiver concatenado nomes:</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li><a href="#Calculo-das-frequencias">Calculo das frequencias</a></li>
      <li><a href="#Funcao-logaritmo">Funcao logaritmo</a></li>
      <li><a href="#Funcao-Trim">Funcao Trim</a></li>
    </ul>
  </li>
</ul>

<h1 id="Names.pl">Names.pl</h1>

<p>Esta script faz um reconhecimento dos nomes de pessoas que constituem as noticias.</p>

<p>Alem disso, verifica se esses nomes existem na Hash respectiva onde se encontram todos os nomes presentes na Base de Dados.</p>

<p>Posteriormente calcula as suas respectivas frequencias.</p>

<h2 id="Modulos">Modulos</h2>

<p>Modulos usados nesta script:</p>

<pre><code>    -&gt; use warnings;

    -&gt; use strict;

    -&gt; use Data::Dumper;

    -&gt; use utf8::all;</code></pre>

<h2 id="Variaveis">Variaveis</h2>

<p>Variaveis utilizadas neste script:</p>

<pre><code>    -&gt; my @words;
    -&gt; my $total_palavras = 1882303;
    -&gt; my $word;
    -&gt; my $strAnt;
    -&gt; my $strActual;
    -&gt; my $is_name;
    -&gt; my $preposition = &#39;dedadodasdosdes&#39;;
    -&gt; my $flag = 0;
    -&gt; my %nomes;</code></pre>

<h2 id="Abertura-da-Base-de-Dados---Nomes">Abertura da Base de Dados - Nomes</h2>

<p>Abre o ficheiro nomes.txt e guarda-o na Hash %nomes.</p>

<pre><code>    -&gt; open (my $file_cidades, &quot;&lt;&quot;, &quot;../DBs/nomes.txt&quot;) or die (&quot;Impossivel abrir o ficheiro nomes.txt\n&quot;);</code></pre>

<h2 id="Leitura-dos-Ficheiros">Leitura dos Ficheiros</h2>

<p>Leitura da ficheiro nomes.txt e guarda cada um dos nomes na hash %nomes</p>

<pre><code>    while(&lt;$file_nomes&gt;){
      $_ = substr($_,0,(length($_)-1));
      $nomes{$_}=0;
    }

    close ($file_nomes);</code></pre>

<h2 id="Abertura-do-Ficheiro-com-as-noticias">Abertura do Ficheiro com as noticias</h2>

<p>Abre o ficheiro jb.xml e guarda-o na variavel $jb_file.</p>

<pre><code>    -&gt; open (my $jb_file, &quot;&lt;&quot;, &quot;../jb.xml&quot;) or die (&quot;Impossivel abrir o ficheiro jb.xml\n&quot;);</code></pre>

<h2 id="Variavel-Nome-Proprio">Variavel Nome Proprio</h2>

<pre><code>      -&gt; my $pm = qr{[[:upper:]]\w+};</code></pre>

<h2 id="Variavel-Preposicoes">Variavel Preposicoes</h2>

<pre><code>      -&gt; my $prep = qr{d[eoa`]s?};</code></pre>

<h2 id="Variavel-Combinada-com-Nome-Proprio-e-Preposicoes">Variavel Combinada com Nome Proprio e Preposicoes</h2>

<pre><code>      -&gt; my $np = qr{$pm( ($prep )?$pm)*};</code></pre>

<h2 id="Contagem-dos-Nomes">Contagem dos Nomes</h2>

<p>Leitura do ficheiro de noticias e contagem dos nomes</p>

<h3 id="Processar-o-ficheiro-jb.xml">Processar o ficheiro jb.xml</h3>

<pre><code>      while (&lt;$jb_file&gt;){</code></pre>

<h3 id="ignorar-tags">ignorar tags (&lt; &lt;/ &gt; /&gt;)</h3>

<pre><code>      -&gt; next if /^&lt;/;</code></pre>

<h3 id="ignore-text-from-tag-tags">ignore text from tag tags</h3>

<pre><code>      -&gt; next if /&lt;tags&gt;.*/;</code></pre>

<h3 id="ignore-text-from-tag-tag">ignore text from tag tag</h3>

<pre><code>      -&gt; next if /&lt;tag&gt;.*/;</code></pre>

<h3 id="ignore-text-form-tag-t-title">ignore text form tag t (title)</h3>

<pre><code>      -&gt; next if /&lt;t&gt;.*/;</code></pre>

<h3 id="ignore-text-form-tag-sec-section">ignore text form tag sec (section)</h3>

<pre><code>      -&gt; next if /&lt;sec&gt;.*/;</code></pre>

<h2 id="Match-a-expressao-regular">Match a expressao regular</h2>

<pre><code>      -&gt; while(/([A-Z]\w+)([\s-]*(d[eoa]s)?([\s-])?[A-Z]\w+)*/g){</code></pre>

<h3 id="Se-a-expressao-existir-na-hash-nomes">Se a expressao existir na hash nomes</h3>

<pre><code>      my $palavra = $&amp;;
      if(exists $nomes{$1}){</code></pre>

<h4 id="Faco-split-do-que-a-expressao-apanha">Faco split do que a expressao apanha</h4>

<pre><code>      @words = split / /, $palavra;</code></pre>

<h4 id="Para-cada-string-no-array-da-expressao-regular">Para cada string no array da expressao regular</h4>

<pre><code>      foreach $word (@words){</code></pre>

<h4 id="A-nao-ser-que-seja-de-do-da-des-dos-das">A nao ser que seja (de/do/da/des/dos/das)</h4>

<pre><code>      unless ($word =~ /(de|da|do|des|das|dos)/){</code></pre>

<h4 id="Se-a-string-nao-existir-na-hash-dos-nomes">Se a string nao existir na hash dos nomes:</h4>

<pre><code>      if(!exists $nomes{$word}){

      -&gt; Meto a flag = 1 e faco com que seja a ultima iteracao do ciclo.</code></pre>

<h4 id="Se-a-string-existir-na-hash-dos-nomes">Se a string existir na hash dos nomes:</h4>

<p>vou concatenado com a string anterior.</p>

<pre><code>      else{
        $strAnt = $strAnt . &#39; &#39; . $word;
        $is_name++;
      }</code></pre>

<h4 id="Se-a-flag-for-falsa">Se a flag for falsa:</h4>

<p>Ou seja se todos os nomes do nome existirem na hash adiciona o nome</p>

<pre><code>      $nomes{$palavra}++;</code></pre>

<h4 id="Se-a-flag-for-verdadeira-e-se-tiver-concatenado-nomes">Se a flag for verdadeira e se tiver concatenado nomes:</h4>

<p>Adiciona o nome as estatisticas</p>

<pre><code>      $nomes{trim($strAnt)}++;</code></pre>

<h2 id="Calculo-das-frequencias">Calculo das frequencias</h2>

<p>Neste excerto de codigo sao calculadas as frequencias das cidades.</p>

<pre><code>      foreach my $name (sort keys %nomes){
        if($nomes{$name} &gt; 0){
          my $freq = ($nomes{$name}*1000000)/$total_palavras;
          $freq = sprintf(&quot;%.4f&quot;,$freq);
          my $log = log10($nomes{$name});
          $log = sprintf(&quot;%.4f&quot;,$log);
          print &quot;$name,$nomes{$name},$freq,$log\n&quot;;
        }
      }</code></pre>

<h2 id="Funcao-logaritmo">Funcao logaritmo</h2>

<p>Funcao que calcula o logaritmo base 10 de n</p>

<pre><code>      sub log10{
        my $n = shift;
        return log($n)/log(10);
      }</code></pre>

<h2 id="Funcao-Trim">Funcao Trim</h2>

<p>Funcao que faz o trim de uma string</p>

<pre><code>      sub  trim { 
        my $s = shift; 
        $s =~ s/^\s+|\s+$//g; 
        return $s
      };</code></pre>




                        </div>
                    </div>
                </div>
            </div>

        </div>

        <script src="js/jquery.js"></script>

        <script src="js/bootstrap.min.js"></script>

        <script>
        $("#menu-toggle").click(function(e) {
            e.preventDefault();
            $("#wrapper").toggleClass("toggled");
        });
        </script>

    </body>

</html>


